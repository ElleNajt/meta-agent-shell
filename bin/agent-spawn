#!/bin/bash
# agent-spawn - Spawn a new named agent
# Usage: agent-spawn "AgentName" "initial task"
#
# Spawns agent in the current directory's project.

if [ $# -lt 1 ]; then
    echo "Usage: agent-spawn \"AgentName\" [\"initial task\"]" >&2
    exit 1
fi

name="$1"
task="${2:-}"

# Get current directory for project path
project_path="$(pwd)"

if [ -n "$task" ]; then
    emacsclient --eval "(meta-agent-shell-start-named-agent \"$project_path\" \"$name\" \"$task\")"
else
    emacsclient --eval "(meta-agent-shell-start-named-agent \"$project_path\" \"$name\")"
fi
